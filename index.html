<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EuroJackpot AI Advanced - Sistema Predittivo Evolutivo</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #2a2a3a 0%, #1e1e2e 100%);
            min-height: 100vh;
            color: #f0f0f0;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #7dd3a3, #a8c8e8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            color: #c0c0c0;
            font-size: 1.1rem;
        }

        .section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-header {
            padding: 15px 20px;
            background: linear-gradient(135deg, #7dd3a3, #a8c8e8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            font-size: 1.1rem;
            color: #2a2a3a;
            transition: all 0.3s ease;
        }

        .section-header:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 20px rgba(125, 211, 163, 0.3);
        }

        .section-header .icon {
            margin-right: 10px;
        }

        .section-header .arrow {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
        }

        .section-header.collapsed .arrow {
            transform: rotate(-90deg);
        }

        .section-content {
            padding: 20px;
            transition: all 0.3s ease;
        }

        .section-content.collapsed {
            max-height: 0;
            padding: 0 20px;
            overflow: hidden;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .card h3 {
            color: #7dd3a3;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .btn {
            background: linear-gradient(45deg, #7dd3a3, #a8c8e8);
            color: #2a2a3a;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            font-size: 1rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(125, 211, 163, 0.4);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
        }

        .btn-danger:hover {
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.9rem;
            margin-left: 10px;
        }

        .input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            color: #f0f0f0;
            width: 100%;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .input:focus {
            outline: none;
            border-color: #7dd3a3;
            box-shadow: 0 0 0 3px rgba(125, 211, 163, 0.3);
        }

        .numbers-display {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }

        .number {
            background: linear-gradient(45deg, #7dd3a3, #a8c8e8);
            color: #2a2a3a;
            padding: 8px 12px;
            border-radius: 50%;
            font-weight: 700;
            min-width: 40px;
            text-align: center;
        }

        .euronumber {
            background: linear-gradient(45deg, #e8b8c8, #b8a8d8);
        }

        .prediction-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .prediction-numbers {
            flex-grow: 1;
        }

        .prediction-meta {
            font-size: 0.9rem;
            color: #c0c0c0;
            margin-bottom: 8px;
        }

        .delete-btn {
            background: #ff4757;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: #ff3742;
            transform: scale(1.1);
        }

        .algorithm-status {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .status-active { background: #7dd3a3; }
        .status-learning { background: #feca57; }
        .status-idle { background: #c0c0c0; }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #7dd3a3, #a8c8e8);
            transition: width 0.3s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #7dd3a3;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #c0c0c0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .prediction-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .delete-btn {
                align-self: flex-end;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üéØ EuroJackpot AI Advanced</h1>
            <p>Sistema Predittivo Evolutivo con Machine Learning</p>
        </header>

        <!-- Dashboard Analytics -->
        <section class="section">
            <div class="section-header" onclick="toggleSection('analytics')">
                <span><span class="icon">üìä</span>Dashboard Analytics</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="section-content" id="analytics">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="totalPredictions">0</div>
                        <div class="stat-label">Predizioni Generate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalExtractions">0</div>
                        <div class="stat-label">Estrazioni Analizzate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="avgAccuracy">0%</div>
                        <div class="stat-label">Accuratezza Media</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="learningProgress">0%</div>
                        <div class="stat-label">Progresso Learning</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Algoritmi -->
        <section class="section">
            <div class="section-header" onclick="toggleSection('algorithms')">
                <span><span class="icon">ü§ñ</span>Status Algoritmi AI</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="section-content" id="algorithms">
                <div class="grid" id="algorithmsGrid"></div>
            </div>
        </section>

        <!-- Inserimento Dati -->
        <section class="section">
            <div class="section-header" onclick="toggleSection('dataInput')">
                <span><span class="icon">üì•</span>Inserimento Dati</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="section-content" id="dataInput">
                <div class="grid">
                    <div class="card">
                        <h3>Inserimento Manuale</h3>
                        <input type="date" id="extractionDate" class="input">
                        <input type="text" id="mainNumbers" placeholder="5 numeri principali (es: 1,15,23,35,49)" class="input">
                        <input type="text" id="euroNumbers" placeholder="2 euronumeri (es: 3,8)" class="input">
                        <button class="btn" onclick="addExtraction()">Aggiungi Estrazione</button>
                    </div>
                    <div class="card">
                        <h3>Import CSV</h3>
                        <input type="file" id="csvFile" accept=".csv" class="input">
                        <button class="btn" onclick="importCSV()">Importa da CSV</button>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: #c0c0c0;">
                            Formato CSV: data,num1,num2,num3,num4,num5,euro1,euro2
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Predizioni AI -->
        <section class="section">
            <div class="section-header" onclick="toggleSection('predictions')">
                <span><span class="icon">üéØ</span>Predizioni AI</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="section-content" id="predictions">
                <div style="margin-bottom: 20px;">
                    <button class="btn" onclick="generatePrediction()">üé≤ Genera Predizione AI</button>
                    <button class="btn btn-danger" onclick="clearAllPredictions()" style="margin-left: 10px;">üóëÔ∏è Cancella Tutte le Predizioni</button>
                </div>
                <div id="predictionsHistory"></div>
            </div>
        </section>

        <!-- Storico Estrazioni -->
        <section class="section">
            <div class="section-header" onclick="toggleSection('history')">
                <span><span class="icon">üìã</span>Storico Estrazioni</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="section-content" id="history">
                <div id="extractionsHistory"></div>
            </div>
        </section>

        <!-- Configurazione Avanzata -->
        <section class="section">
            <div class="section-header" onclick="toggleSection('config')">
                <span><span class="icon">‚öôÔ∏è</span>Configurazione Avanzata</span>
                <span class="arrow">‚ñº</span>
            </div>
            <div class="section-content collapsed" id="config">
                <div class="grid">
                    <div class="card">
                        <h3>Parametri Learning</h3>
                        <label>Learning Rate:</label>
                        <input type="range" id="learningRate" min="0.01" max="0.1" step="0.01" value="0.05" class="input">
                        <span id="learningRateValue">0.05</span>
                        
                        <label>Peso Pattern Analysis:</label>
                        <input type="range" id="patternWeight" min="0.1" max="1.0" step="0.1" value="0.7" class="input">
                        <span id="patternWeightValue">0.7</span>
                    </div>
                    <div class="card">
                        <h3>Algoritmi Attivi</h3>
                        <div id="algorithmToggles"></div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        class EuroJackpotAI {
            constructor() {
                this.algorithms = [
                    { name: 'Neural Network', accuracy: 0.72, status: 'active', description: 'Rete neurale per pattern complessi' },
                    { name: 'Random Forest', accuracy: 0.68, status: 'active', description: 'Ensemble di alberi decisionali' },
                    { name: 'K-Means Clustering', accuracy: 0.65, status: 'learning', description: 'Raggruppamento numeri frequenti' },
                    { name: 'Regression Analysis', accuracy: 0.71, status: 'active', description: 'Analisi tendenze temporali' },
                    { name: 'Frequency Analysis', accuracy: 0.69, status: 'active', description: 'Analisi frequenze statistiche' },
                    { name: 'Pattern Recognition', accuracy: 0.67, status: 'learning', description: 'Riconoscimento pattern ricorrenti' },
                    { name: 'Markov Chain', accuracy: 0.63, status: 'active', description: 'Catene di Markov per sequenze' },
                    { name: 'Genetic Algorithm', accuracy: 0.70, status: 'learning', description: 'Algoritmo genetico evolutivo' },
                    { name: 'SVM Classifier', accuracy: 0.66, status: 'active', description: 'Support Vector Machine' },
                    { name: 'Decision Tree', accuracy: 0.64, status: 'idle', description: 'Albero decisionale semplificato' }
                ];
                
                this.extractions = this.loadExtractions();
                this.predictions = this.loadPredictions();
                this.sectionStates = this.loadSectionStates();
                
                this.init();
            }

            init() {
                this.renderAlgorithms();
                this.renderPredictions();
                this.renderExtractions();
                this.updateStats();
                this.initConfigSliders();
                this.applySectionStates();
            }

            // Storage Methods
            loadExtractions() {
                return JSON.parse(localStorage.getItem('eurojackpot_extractions') || '[]');
            }

            saveExtractions() {
                localStorage.setItem('eurojackpot_extractions', JSON.stringify(this.extractions));
            }

            loadPredictions() {
                return JSON.parse(localStorage.getItem('eurojackpot_predictions') || '[]');
            }

            savePredictions() {
                localStorage.setItem('eurojackpot_predictions', JSON.stringify(this.predictions));
            }

            loadSectionStates() {
                return JSON.parse(localStorage.getItem('eurojackpot_sections') || '{}');
            }

            saveSectionStates() {
                localStorage.setItem('eurojackpot_sections', JSON.stringify(this.sectionStates));
            }

            // Section Management
            applySectionStates() {
                Object.keys(this.sectionStates).forEach(sectionId => {
                    if (this.sectionStates[sectionId] === 'collapsed') {
                        const content = document.getElementById(sectionId);
                        const header = content.previousElementSibling;
                        content.classList.add('collapsed');
                        header.classList.add('collapsed');
                    }
                });
            }

            // Algorithm Methods
            renderAlgorithms() {
                const grid = document.getElementById('algorithmsGrid');
                grid.innerHTML = this.algorithms.map(alg => `
                    <div class="card">
                        <div class="algorithm-status">
                            <div class="status-indicator status-${alg.status}"></div>
                            <strong>${alg.name}</strong>
                        </div>
                        <p style="font-size: 0.9rem; margin-bottom: 10px;">${alg.description}</p>
                        <div>Accuratezza: <strong>${(alg.accuracy * 100).toFixed(1)}%</strong></div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${alg.accuracy * 100}%"></div>
                        </div>
                    </div>
                `).join('');
            }

            // Prediction Methods
            generatePrediction() {
                const mainNumbers = this.generateMainNumbers();
                const euroNumbers = this.generateEuroNumbers();
                
                const prediction = {
                    id: Date.now(),
                    mainNumbers,
                    euroNumbers,
                    timestamp: new Date().toISOString(),
                    confidence: Math.random() * 0.3 + 0.6, // 60-90%
                    algorithm: this.algorithms[Math.floor(Math.random() * this.algorithms.length)].name
                };

                this.predictions.unshift(prediction);
                this.savePredictions();
                this.renderPredictions();
                this.updateStats();

                // Simulazione learning
                this.simulateLearning();
            }

            generateMainNumbers() {
                const numbers = new Set();
                const patterns = this.analyzePatterns();
                
                while (numbers.size < 5) {
                    let num;
                    if (Math.random() < 0.7 && patterns.frequent.length > 0) {
                        // 70% chance di usare numeri frequenti
                        num = patterns.frequent[Math.floor(Math.random() * patterns.frequent.length)];
                    } else {
                        num = Math.floor(Math.random() * 50) + 1;
                    }
                    numbers.add(num);
                }
                
                return Array.from(numbers).sort((a, b) => a - b);
            }

            generateEuroNumbers() {
                const numbers = new Set();
                while (numbers.size < 2) {
                    numbers.add(Math.floor(Math.random() * 12) + 1);
                }
                return Array.from(numbers).sort((a, b) => a - b);
            }

            analyzePatterns() {
                if (this.extractions.length === 0) {
                    return { frequent: [], rare: [] };
                }

                const frequency = {};
                this.extractions.forEach(ext => {
                    ext.mainNumbers.forEach(num => {
                        frequency[num] = (frequency[num] || 0) + 1;
                    });
                });

                const sorted = Object.entries(frequency).sort((a, b) => b[1] - a[1]);
                const frequent = sorted.slice(0, 15).map(([num]) => parseInt(num));
                const rare = sorted.slice(-10).map(([num]) => parseInt(num));

                return { frequent, rare };
            }

            deletePrediction(predictionId) {
                if (confirm('Sei sicuro di voler cancellare questa predizione?')) {
                    this.predictions = this.predictions.filter(p => p.id !== predictionId);
                    this.savePredictions();
                    this.renderPredictions();
                    this.updateStats();
                }
            }

            clearAllPredictions() {
                if (confirm('Sei sicuro di voler cancellare TUTTE le predizioni? Questa azione non pu√≤ essere annullata.')) {
                    this.predictions = [];
                    this.savePredictions();
                    this.renderPredictions();
                    this.updateStats();
                }
            }

            renderPredictions() {
                const container = document.getElementById('predictionsHistory');
                if (this.predictions.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #c0c0c0; padding: 20px;">Nessuna predizione generata ancora. Clicca "Genera Predizione AI" per iniziare!</p>';
                    return;
                }

                container.innerHTML = this.predictions.map(pred => `
                    <div class="prediction-item">
                        <div class="prediction-numbers">
                            <div class="prediction-meta">
                                ${new Date(pred.timestamp).toLocaleString('it-IT')} - 
                                ${pred.algorithm} - 
                                Confidenza: ${(pred.confidence * 100).toFixed(1)}%
                            </div>
                            <div class="numbers-display">
                                ${pred.mainNumbers.map(num => `<span class="number">${num}</span>`).join('')}
                                ${pred.euroNumbers.map(num => `<span class="number euronumber">${num}</span>`).join('')}
                            </div>
                        </div>
                        <button class="delete-btn" onclick="ai.deletePrediction(${pred.id})" title="Cancella predizione">√ó</button>
                    </div>
                `).join('');
            }

            // Extraction Methods
            addExtraction() {
                const date = document.getElementById('extractionDate').value;
                const mainStr = document.getElementById('mainNumbers').value;
                const euroStr = document.getElementById('euroNumbers').value;

                if (!date || !mainStr || !euroStr) {
                    alert('Compila tutti i campi!');
                    return;
                }

                const mainNumbers = mainStr.split(',').map(n => parseInt(n.trim()));
                const euroNumbers = euroStr.split(',').map(n => parseInt(n.trim()));

                if (mainNumbers.length !== 5 || euroNumbers.length !== 2) {
                    alert('Inserisci esattamente 5 numeri principali e 2 euronumeri!');
                    return;
                }

                const extraction = {
                    id: Date.now(),
                    date,
                    mainNumbers: mainNumbers.sort((a, b) => a - b),
                    euroNumbers: euroNumbers.sort((a, b) => a - b)
                };

                this.extractions.unshift(extraction);
                this.saveExtractions();
                this.renderExtractions();
                this.updateStats();

                // Clear form
                document.getElementById('extractionDate').value = '';
                document.getElementById('mainNumbers').value = '';
                document.getElementById('euroNumbers').value = '';
            }

            renderExtractions() {
                const container = document.getElementById('extractionsHistory');
                if (this.extractions.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #c0c0c0; padding: 20px;">Nessuna estrazione inserita. Aggiungi le estrazioni storiche per migliorare le predizioni AI!</p>';
                    return;
                }

                container.innerHTML = this.extractions.map(ext => `
                    <div class="prediction-item">
                        <div class="prediction-numbers">
                            <div class="prediction-meta">Estrazione del ${new Date(ext.date).toLocaleDateString('it-IT')}</div>
                            <div class="numbers-display">
                                ${ext.mainNumbers.map(num => `<span class="number">${num}</span>`).join('')}
                                ${ext.euroNumbers.map(num => `<span class="number euronumber">${num}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Stats Methods
            updateStats() {
                document.getElementById('totalPredictions').textContent = this.predictions.length;
                document.getElementById('totalExtractions').textContent = this.extractions.length;
                
                const avgAccuracy = this.algorithms.reduce((sum, alg) => sum + alg.accuracy, 0) / this.algorithms.length;
                document.getElementById('avgAccuracy').textContent = (avgAccuracy * 100).toFixed(1) + '%';
                
                const learningProgress = Math.min(100, (this.extractions.length * 2) + (this.predictions.length * 0.5));
                document.getElementById('learningProgress').textContent = learningProgress.toFixed(0) + '%';
            }

            simulateLearning() {
                // Simula il miglioramento degli algoritmi
                this.algorithms.forEach(alg => {
                    if (alg.status === 'learning') {
                        alg.accuracy += Math.random() * 0.005;
                        if (alg.accuracy > 0.85) alg.accuracy = 0.85;
                    }
                });
                this.renderAlgorithms();
            }

            initConfigSliders() {
                const learningRate = document.getElementById('learningRate');
                const patternWeight = document.getElementById('patternWeight');
                
                learningRate.oninput = () => {
                    document.getElementById('learningRateValue').textContent = learningRate.value;
                };
                
                patternWeight.oninput = () => {
                    document.getElementById('patternWeightValue').textContent = patternWeight.value;
                };
            }
        }

        // Global Functions
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId);
            const header = content.previousElementSibling;
            
            content.classList.toggle('collapsed');
            header.classList.toggle('collapsed');
            
            ai.sectionStates[sectionId] = content.classList.contains('collapsed') ? 'collapsed' : 'expanded';
            ai.saveSectionStates();
        }

        function addExtraction() {
            ai.addExtraction();
        }

        function generatePrediction() {
            ai.generatePrediction();
        }

        function clearAllPredictions() {
            ai.clearAllPredictions();
        }

        function importCSV() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Seleziona un file CSV!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                const lines = csv.split('\n').slice(1); // Skip header
                
                lines.forEach(line => {
                    if (line.trim()) {
                        const parts = line.split(',');
                        if (parts.length >= 8) {
                            const extraction = {
                                id: Date.now() + Math.random(),
                                date: parts[0],
                                mainNumbers: [
                                    parseInt(parts[1]),
                                    parseInt(parts[2]),
                                    parseInt(parts[3]),
                                    parseInt(parts[4]),
                                    parseInt(parts[5])
                                ].sort((a, b) => a - b),
                                euroNumbers: [
                                    parseInt(parts[6]),
                                    parseInt(parts[7])
                                ].sort((a, b) => a - b)
                            };
                            ai.extractions.push(extraction);
                        }
                    }
                });
                
                ai.saveExtractions();
                ai.renderExtractions();
                ai.updateStats();
                alert('Dati CSV importati con successo!');
            };
            
            reader.readAsText(file);
        }

        // Initialize App
        let ai;
        document.addEventListener('DOMContentLoaded', function() {
            ai = new EuroJackpotAI();
        });
    </script>
</body>
</html>






